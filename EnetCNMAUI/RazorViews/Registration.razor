@inject IJSRuntime JSRuntime
@using Plugin.Firebase.CloudMessaging;


<div class="main-wrap">

    <div class="nav-header bg-transparent shadow-none border-0">
        <div class="nav-top w-100">
            <a href="CN-index.html" class="mt-3"><img src="images/connect_now.svg" alt="" /> </a>
            <a href="CN_login.html" class="header-btn d-none d-lg-block bg-dark fw-500 text-white font-xsss p-3 ms-auto w100 text-center lh-20 rounded-xl">Login</a>
            <a href="CN-register.html" class="header-btn d-none d-lg-block bg-current fw-500 text-white font-xsss p-3 ms-2 w100 text-center lh-20 rounded-xl">Register</a>

        </div>


    </div>

    <div class="row">
        <div class="col-xl-5 d-none d-xl-block p-0 vh-100 bg-image-cover bg-no-repeat" style="background-image: url(images/login-bg-2.jpg);"></div>
        <div class="col-xl-7 vh-100 align-items-center d-flex bg-white rounded-3 overflow-hidden">
            <div class="card shadow-none border-0 ms-auto me-auto login-card">
                <div class="card-body rounded-0 text-left ">
                    <h2 class="fw-700 display1-size display2-md-size mb-4">Create <br>your account</h2>

                    <form id="regForm" action="#">
                        <div class="tab">
                            <p>Please fill atleasts one or both option to get your validation code.</p>
                            <div class="form-group icon-input mb-3">
                                <i class="font-sm ti-mobile text-grey-500 pe-0"></i>
                                <input type="text" class="style2-input ps-5 form-control text-grey-900 font-xsss fw-600" placeholder="Phone Number">
                            </div>
                            <div class="form-group icon-input mb-3">
                                <i class="font-sm ti-email text-grey-500 pe-0"></i>
                                <input type="text" class="style2-input ps-5 form-control text-grey-900 font-xsss fw-600" placeholder="Your Email Address">
                            </div>
                        </div>

                        <div class="tab">
                            <p>Enter Verification Code sent to Email/Phone <a href="#">Wrong Number or Email?</a></p>
                            <div class="form-group icon-input mb-3">
                                <i class="font-sm ti-key text-grey-500 pe-0"></i>
                                <input type="text" class="style2-input ps-5 form-control text-grey-900 font-xsss fw-600" placeholder="Enter 6-Digit Code">
                            </div>
                        </div>

                        <div class="tab">
                            <div class="form-group icon-input mb-3">
                                <i class="font-sm ti-user text-grey-500 pe-0"></i>
                                <input type="text" class="style2-input ps-5 form-control text-grey-900 font-xsss fw-600" placeholder="Your Name">
                            </div>
                            <div class="form-group icon-input mb-3">
                                <i class="font-sm ti-user text-grey-500 pe-0"></i>
                                <input type="text" class="style2-input ps-5 form-control text-grey-900 font-xsss fw-600" placeholder="Last Name">
                            </div>
                            <div class="form-group icon-input mb-3">
                                <input type="Password" class="style2-input ps-5 form-control text-grey-900 font-xss ls-3" placeholder="Password">
                                <i class="font-sm ti-lock text-grey-500 pe-0"></i>
                            </div>
                            <div class="form-group icon-input mb-1">
                                <input type="Password" class="style2-input ps-5 form-control text-grey-900 font-xss ls-3" placeholder="Confirm Password">
                                <i class="font-sm ti-lock text-grey-500 pe-0"></i>
                            </div>
                            <div class="form-check text-left mb-3">
                                <input type="checkbox" class="form-check-input mt-2" id="exampleCheck2">
                                <label class="form-check-label font-xsss text-grey-500 mt-1 " for="exampleCheck2">Accept Term and Conditions</label>
                            </div>
                        </div>

                        <div class="overflow-auto">
                            <div class="d-flex flex-row flex-nowrap justify-content-between">
                                <button type="button" id="prevBtn" @onclick="() =>nextPrev(-1)" class="text-center text-white fw-600 bg-dark border-0 p-2 px-3 rounded-4 rounded-xl">Previous</button>
                                <button type="button" id="nextBtn" @onclick="() =>nextPrev(1)" class="text-center text-white fw-600 bg-dark border-0 p-2 px-3 rounded-4 rounded-xl ml-auto">Next</button>
                            </div>
                        </div>

                        <div class="text-center mt-5">
                            <span class="step"></span>
                            <span class="step"></span>
                            <span class="step"></span>
                        </div>

                    </form>

                </div>
            </div>
        </div>
    </div>
</div>

@code {

    private IJSObjectReference? registrationJsRefernce;
    private DotNetObjectReference<Registration>? registrationDotnetReference;

    

    protected override async Task OnInitializedAsync()
    {
        registrationJsRefernce = await JSRuntime.InvokeAsync<IJSObjectReference>("import", "./RazorViews/Registration.razor.js");
       // await JSRuntime.InvokeVoidAsync("Helpers.setDotNetHelper", DotNetObjectReference.Create(this));

        registrationDotnetReference = DotNetObjectReference.Create(this);
        SetupTabs();
        base.OnInitialized();
    }
    private async void SetupTabs()
    {
        try
        {
            var token = await CrossFirebaseCloudMessaging.Current.GetTokenAsync();
        }
        catch (Exception ex)
        {
        }
        await Task.Delay(200);
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {

        }
        base.OnAfterRender(firstRender);
    }
    private int currenttab = 0;

    private async void nextPrev(int n)
    {
        //if (currenttab == 2 && n == 1) return;
        await registrationJsRefernce.InvokeVoidAsync("nextPrev", n, currenttab);
        currenttab = currenttab + n;


    }

    [JSInvokable("resetTabCount")]
    public Task resetTabCount(int n)
    {
        currenttab = currenttab - n;
        return Task.CompletedTask;
    }
}

